<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>game 1</title>
    <style>
        canvas {
            border: 1px black solid;
        }
    </style>
</head>
<body>
    <canvas id="id-canvas" width="400px" height="300px"></canvas>

    <script>
        var log = console.log

        var imgFromPath = function(path) {
            var img = new Image()
            img.src = path
            return img
        }

        var Paddle = function() {
            var image = imgFromPath("paddle.png")
            var o = {
                image: image,
                x: 100,
                y: 200,
                speed: 5,
            }

            o.moveLeft = function() {
                o.x -= o.speed
            }
            o.moveRight = function() {
                o.x += o.speed
            }
            return o
        }
        

        var __main = function() {
            var canvas = document.querySelector("#id-canvas")
            var context = canvas.getContext('2d')

            
            var leftDown = false
            var rightDown = false
            var paddle = Paddle()
            

            //火狐开发者版本中 不写 img.onload事件也能加载出图片
            // img.addEventListener("load", () => {
            //     //drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)
            //     context.drawImage(paddle.image, 150, 200)
            // })

            addEventListener("keydown", event => {
                var k = event.key
                if(k == 'a') {
                    leftDown = true
                } else if(k == 'd') {
                    rightDown = true
                }
            })

            addEventListener("keyup", event => {
                var k = event.key
                if(k == 'a') {
                    leftDown = false
                } else if(k == 'd') {
                    rightDown = false
                }
            })

            setInterval(function() {
                if(leftDown) {
                    paddle.moveLeft()
                } else if(rightDown) {
                    paddle.moveRight()
                }

                context.clearRect(0, 0, canvas.width, canvas.height)
                context.drawImage(paddle.image, paddle.x, paddle.y)
            }, 1000/30) 
        }

        __main()

    </script>
</body>
</html>